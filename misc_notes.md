# Misc. Notes

## Notifications

The screen sends back "value received" notifications along with each packet received. They follow this pattern. It is theoretically possible to sent more than one packet at a time (potentially up to 3) and wait for the corresponding notifications before sending more. That may be slightly faster than the current naive method of sending one packet and waiting for *any* notification to come back.

```plaintext
aa55130a07 000000 818200 2602
aa55130a07 000100 818200 2702
aa55130a07 000200 818200 2802
aa55130a07 000300 818200 2902
aa55130a07 000400 818200 2a02
aa55130a07 000500 818200 2b02
aa55130a07 000600 818200 2c02
aa55130a07 000700 818200 2d02
aa55130a07 000800 818200 2e02
aa55130a07 000900 818200 2f02
aa55130a07 000a00 818200 3002
aa55130a07 000b00 818200 3102
aa55130a07 000c00 818200 3202
aa55130a07 000d00 818200 3302
aa55130a07 000e00 818200 3402
aa55130a07 000f00 818200 3502
aa55130a07 001000 818200 3602
aa55130a07 001100 818200 3702
aa55130a07 001200 818200 3802
aa55130a07 001300 818200 3902
aa55130a07 001400 818200 3a02
aa55130a07 001500 818200 3b02
aa55130a07 001600 818200 3c02
aa55130a07 001700 818200 3d02
aa55130a07 001800 818200 3e02
aa55130a07 001900 818200 3f02
aa55130a07 001a00 818200 4002
aa55130a07 001b00 818200 4102
aa55130a07 001c00 818200 4202
aa55130a07 001d00 818200 4302
aa55130a07 001e00 818200 4402
aa55130a07 001f00 818200 4502
aa55130a07 002000 818200 4602
aa55130a07 002100 818200 4702
aa55130a07 002200 818200 4802
aa55130a07 002300 818200 4902
aa55130a07 002400 818200 4a02
aa55130a07 002500 818200 4b02
aa55130a07 002600 818200 4c02
aa55130a07 002700 818200 4d02
aa55130a07 002800 818200 4e02
```

## Brightness

One of the first signs that I was getting somewhere with this project was being able to send back the app's commands to change the brightness of the screen.

If I ever go further with this project in the future, such as creating a custom application for it, brightness changing commands will likely be included. In the meantime, here are the commands in question, including all 16 brightness levels and commands to blank and unblank the screen.

```python
# Raw brightness commands
brightness_0 = bytearray([0xaa, 0x55, 0xff, 0xff, 0x0a, 0x00, 0x04, 0x00, 0xc1, 0x02, 0x06, 0x02, 0x00, 0x00, 0xd6, 0x03])
brightness_1 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0x1, 0xd7, 0x3])
brightness_2 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0x2, 0xd8, 0x3])
brightness_3 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0x3, 0xd9, 0x3])
brightness_4 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0x4, 0xda, 0x3])
brightness_5 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0x5, 0xdb, 0x3])
brightness_6 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0x6, 0xdc, 0x3])
brightness_7 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0x7, 0xdd, 0x3])
brightness_8 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0x8, 0xde, 0x3])
brightness_9 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0x9, 0xdf, 0x3])
brightness_10 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0xa, 0xe0, 0x3])
brightness_11 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0xb, 0xe1, 0x3])
brightness_12 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0xc, 0xe2, 0x3])
brightness_13 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0xd, 0xe3, 0x3])
brightness_14 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0xe, 0xe4, 0x3])
brightness_15 = bytearray([0xaa, 0x55, 0xff, 0xff, 0xa, 0x0, 0x4, 0x0, 0xc1, 0x2, 0x6, 0x2, 0x0, 0xf, 0xe5, 0x3])

# This function seems to be capable of generating the brightness command, given a brightness value between 0 and 15
def generate_brightness_command(brightness):
    if not (0 <= brightness <= 15):
        raise ValueError("Brightness must be between 0 and 15 inclusive")
    
    base_array = [
        0xaa, 0x55, 0xff, 0xff, 0x0a, 0x00, 0x04, 0x00,
        0xc1, 0x02, 0x06, 0x02, 0x00
    ]

    checksum = 0xd6 + brightness
    base_array.append(brightness)
    base_array.append(checksum)
    base_array.append(0x03)
    
    return bytearray(base_array)

# Use this line to send the brightness command to the screen
await client.write_gatt_char(0x000d, generate_brightness_command(0), response=True)


# Screen Blank/Unblank Commands
screen_blank = bytearray([0xaa, 0x55, 0xff, 0xff, 0x0a, 0x00, 0x05, 0x00, 0xc1, 0x02, 0x04, 0x02, 0x00, 0x01, 0xd6, 0x03])
screen_unblank = bytearray([0xaa, 0x55, 0xff, 0xff, 0x0a, 0x00, 0x05, 0x00, 0xc1, 0x02, 0x04, 0x02, 0x00, 0x01, 0xd6, 0x03])
```
